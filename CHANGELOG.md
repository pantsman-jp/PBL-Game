# CHANGELOG of PBL-Game

## v0.38.0 (2026-01-25)
- 新規マップ（鹿児島県種子島）の追加
  - `world_map_kagoshima.png` を追加（他の都道府県マップと同様の出典）
  - `maps.json` に"kagoshima"を追加
  - `common.json` に "kagoshima_trip"（茨城県→種子島宇宙センターへ移動するノベルパート）を追加
- npc12,13の追加
  - npc12を茨城県に配置（話しかけると茨城県→種子島宇宙センターへ）
  - npc10を鹿児島県種子島宇宙センターに配置（話しかけると種子島宇宙センター→茨城県へ）
  - 画像ファイル `npc12.png`, `npc13.png` は他の NPC と同様

## v0.37.1 (2026-01-23)
- NPCの整理
 - npc1,2,3クイズ内容と、PR#87で追加された、npc_aichi等の会話内容をジャンルごとに整理
 - `dialogue.json`に記載するNPCの順番を
   - NPC1~4:クイズを出題するNPC 構造系→制御系→通信系→推進系
   - NPC5:エンディングを流すNPC
   - NPC6~11:マップ遷移するNPC　に整理
- `npc11.png`を追加（他のNPCと同様の画像）
- npc1の移動を停止

## v0.37.0 (2026-01-20)
- マップ名表示
  - 全体マップを開いた際に、マップ名が右上部に表示されるように
  - `map.json`にマップごとの"name"（マップ名：福岡県など）を追加
  - `field.py`の`load_map`に`self.current_map_name`を追加し、所在マップ名を取得
  - `field.py`の`draw`で都道府県名を右上部に白文字で表示する

## v0.36.1 (2026-01-20-issa)
- feat(system): 目標テキスト（Objective）に具体的な座標情報を追加
  - プレイヤーが迷わないよう、次に向かうべき場所やNPCの座標（九工大:214,104、NPC1:190,108等）を明示するように変更
  1. 九州工業大学
  2. npc
  3. npcの順番で現在はストーリー進行

## v0.36.0 (2026-01-20-issa)
- ノベルパートのGUI化および機能拡張
  - システム面
    - 選択肢をボタン形式のGUIに変更（マウス/キー操作対応、フォーカス表示）
    - マウスホバーによるハイライト機能の実装
    - 背景画像・立ち絵のスケール調整（`char_scale`）および位置調整（`char_offset_y`）機能を実装
    - シナリオデータの実装構造を変更（古い`novel_scripts.json`を廃止し、ディレクトリ一括読み込みへ）
  - シナリオ・アセット
    - 九工大イベント（`kyutech.json`）の実装（先生との会話、クイズ、アイテム入手）
    - イベント用背景画像（`cupping.png`）、先生立ち絵（`Professor2.png`）の追加<br>
    いずれもフリー素材です
    - アイテム入手演出の強化（`C6-0` 画像を表示）

## v0.35.0
- `dialogues.json`において各都道府県NPCのひな形を作成

## v0.34.2 (2026-01-20)
- マップ遷移できないバグを修正
  - v0.33.0の機能追加で`talk.py`の`_finalize_conversation`が二度定義されていたため、修正

## v0.34.1 (2026-01-20)
- `src/app.py` におけるミキサー初期化順序の変更

## v0.34.0 (2026-01-20)
- マップ表示機能の追加
  - mキーでマップを開けるように
  - `self.map_display` を `field.py` に追加：プレイヤーの所在マップが縮小表示され、場所は赤い円で表示
  - マップを開いている間は、移動、会話ができないよう `field.py` に追記
  - 画面左上部の操作ガイドに"M：マップを開く"を追加

## v0.33.0 (2025-01-20)
- クイズ正誤判定テキストウィンドウの追加
  - `src/core/talk.py` にクイズ結果表示モードを追加
  - 正解・不正解および獲得アイテムを1行ずつ表示する機能の実装
- 会話システム変更に伴う `src/app.py` の安定化処理
  - `Talk` クラスの仕様変更（メソッド名の変更等）に伴う呼び出し箇所の修正
  - 存在しない属性へのアクセスによる AttributeError の修正

## v0.32.1 (2026-01-20)
- BGM が鳴らないバグの解消
  - `src/main.py` に `init_audio()` 関数を追加
    - OS 毎にミキサーを初期化
  - 初期化順序の変更
    - オーディオ環境の初期化 -> `App` クラスの初期化
- `src/main.py` の例外処理の改善

## v0.32.0 (2026-01-19)
- 新規マップ（茨城県）の追加
  - `world_map_ibaraki.png` を追加（他の都道府県マップと同様の出典）
  - `maps.json` に"ibaraki"を追加
  - `novel_scripts.json` に "ibaraki_trip"（神奈川県→茨城県へ電車で移動するノベルパート）を追加
- `train.png` の追加（電車で移動する場合ノベルパート用画像）出典はAI PICT
- npc9,10の追加
  - npc9を神奈川県に配置（話しかけると神奈川県→茨城県へ）
  - npc10を茨城県に配置（話しかけると茨城県→神奈川県へ）
  - 画像ファイル `npc9.png`, `npc10.png` は他の NPC と同様

## v0.31.0 (2026-01-14)
- 新規マップ（神奈川県）の追加
  - world_map_kanagawa.pngを追加（他の都道府県マップと同様の出典）
  - `maps.json` に"kanagawa"を追加
  - `novel_scripts.json` に "kanagawa_trip"（神奈川県へ移動するノベルパート）を追加
- npc7,8 の追加
  - npc7を愛知県に配置（話しかけると愛知県→神奈川県へ）
  - npc8を神奈川県に配置（話しかけると神奈川県→愛知県へ）
    - 画像ファイル `npc7.png`, `npc8.png` は他の NPC と同様

## v0.30.2 (2026-01-14)
- プレイヤーの表示のずれにより、マップの当たり判定がずれてしまう不具合を解決

## v0.30.1 (2026-01-13)
- 愛知県へマップ遷移時に、福岡県左上部に飛んでしまう不具合を修正
- 不具合の詳細：npc5に話しかけるとノベルパートが開始し、終了時に `start_rpg_game()` が呼ばれることで愛知県へのマップ遷移が上書きされていた。
- `talk.py` の map_trigger を novel_trigger の前に変更
  - 話しかけた NPC に novel_trigger がある場合、マップ遷移を一時中断（stop_map_transition）してノベルパートを開始
  - ノベルパート終了時に `app.py` の `start_rpg_game()` を呼び出して、マップ遷移が一時中断（stop_map_transition）されていれば、マップ遷移を再開する構造に変更
- `airplane.jpg` の出典を `README.md` に記載

## v0.30.0 (2026-01-13)
- npc5,6の追加
  - npc5を福岡県の座標(200,95)に追加（話しかけると福岡県→愛知県へ）
    - `novel_scripts.json` に愛知県へ向かうノベルパート "aichi_trip" を追加
  - npc6を愛知県の座標(69,78)に追加（話しかけると愛知県→福岡県へ戻る）
  - 画像ファイル `npc5.png`, `npc6.png` は他のnpcと同様
- `airplane.jpg` の追加（飛行機で移動する場合のノベルパート用画像）出典は photoAC
- new_map（愛知県）の追加
  - `world_map_aichi.png` を追加（出典は他マップと同様）
  - `map.json` に "aichi" を追加
- map_trigger の追加
  - novel_trigger と同様に、`talk.py` に map_trigger を追加
  - `dialogues.json` の NPC データに map_trigger を追加（話しかけて会話が終了すると対応した map へ遷移する）

## v0.29.3 (2026-01-13)
- 会話終了時の更新処理で keys が未定義になる不具合を修正

## v0.29.2 (2026-01-13)
- クイズ正解時に会話が正しく終了せず、プレイヤー操作が復帰しない問題を修正

## v0.29.1 (2026-01-13)
- 画像のファイル分け
  ```
  assets
  └── img
      ├── character/
      ├── map/
      └── story/
  ```

## v0.29.0 (2026-01-09)
- マップ遷移アニメーションの追加
  - `field.py` の `draw()` に遷移アニメーション描画コードを追加
  - マップ遷移時にアイリスイン・アウトのアニメーションが表示されるよう実装
- マップ(山口県)の追加
  - `world_map_yamaguchi.png` (3720×2840)の追加（出典は福岡県マップと同様）
  - 福岡県の北部の橋：座標 (230,83) を渡ると、マップが山口県に切り替わるように
  - `map.json` に `"yamguchi"` を追加し、マップ遷移の入口・出口を管理

## v0.28.1 (2026-01-09)
- BGM 再生不具合の修正（macOS 対応）
  - SDL_AUDIODRIVER に Windows 専用の `directsound` を強制指定していた処理を削除
  - OS ごとのデフォルトオーディオドライバを使用するよう修正
  - mixer 初期化失敗により BGM が無音になる問題を解消

## v0.28.0 (2026-01-09)
以下のようにリファクタリングを行った。

### `src/core/field.py`
- マップロード処理の抽象化
  - データの読み込み、タイルの構築、NPCの配置を独立したメソッドへ分離し、構造を整理
- タイル描画の最適化
  - 画面外のタイルを描画しないカリング処理の基盤を整備し、パフォーマンスを向上
- プレイヤー移動ロジックの改善
  - 移動方向と衝突判定の計算を整理し、タイルベースの移動をより正確に制御
- NPC・オブジェクト管理
  - マップデータから動的にNPCを生成し、会話イベント（`Talk` クラス）と連携する仕組みを強化
- 座標変換の定数化
  - タイルサイズ等のマジックナンバーを排除し、レイアウト調整を容易に変更可能に

### `src/core/system.py`
- 目的管理のデータ駆動化
  - 進行状況に応じた目標テキスト生成を辞書データに基づいたロジックに変更し、拡張性を向上
- エラーハンドリングの強化
  - セーブ/ロードおよびBGM再生時の例外処理を追加し、ログ出力を詳細化
- BGM制御の堅牢化
  - pygame.mixer の初期化状態を `get_init()` で明示的に確認する処理を追加
  - mixer 未初期化状態での再生要求を防止し、無音状態になる不具合を解消
  - BGM 再生処理の呼び出し順序を整理し、初期化完了後にのみ再生されるよう修正

### `src/core/talk.py`
- 状態遷移の明確化
  - 通常会話とクイズモードの切り替えロジックを整理
- 報酬処理の適正化
  - NPCからの報酬付与およびノベルトリガーの判定を独立したメソッドへ分離
- 入力ガードの改善
  - 誤操作防止用の `wait_frames` 処理を各遷移ポイントへ適切に配置
- 描画ロジックの効率化
  - クイズ選択肢の描画をループ処理に変更し、コードを簡略化

### `src/core/visual_novel.py`
- 画像キャッシュの実装
  - 背景および立ち絵を `_image_cache` で管理し、重複ロードによる負荷を軽減
- レイアウト定数の導入
  - 画面サイズや描画位置を定数化し、デザイン変更を容易に
- リソース読み込みの改善
  - パス解決を `utils.py` と共通化し、配布環境でのパスエラーを防止

### `src/app.py`
- リソース管理の整理
  - `_load_resources` メソッドを新設し、フォント、画像、サウンドの初期化ロジックを分離
- 描画ロジックの分割
  - シーンごとの描画処理を `_draw_title`, `_draw_game`, `_draw_inventory` に分割し、可読性向上
- イベントハンドリングの整理
  - RPGパートの入力処理を `_handle_game_events` へ集約
- インベントリ制御の改善
  - 開閉時のSE再生を含めたトグル処理をメソッド化
- オーディオ初期化順序の修正
  - pygame 初期化後に mixer を明示的に初期化する構成へ変更
  - 初期化完了前に BGM 再生処理が走らないよう制御を追加

### `src/ui.py`
- ウィンドウ描画の高度化
  - アルファチャンネル（透過）に対応し、背景が透けるモダンな UI 表示に変更
- 描画汎用性の向上
  - パディングや枠線幅を共通定数として管理

### `src/utils.py`
- KeyTrackerの最適化
  - 追跡対象キーをクラス定数化し、毎フレームの辞書生成コストを削減
- Pathlibへの統一
  - パス操作を `os.path` から `pathlib.Path` に刷新し、プラットフォーム間の互換性を向上
- ファイル操作の安全性
  - `save_json` 実行時に保存先ディレクトリを自動生成する機能を追加
- 配布用パス解決の改善
  - PyInstaller環境下でのリソースパス解決ロジックをより堅牢に変更

## v0.27.2 (2026-01-09)
- BGM ファイル読み込みのパス指定を修正しました
- `__init__` 関数内で定義されていた内部関数を廃止しクラスのプライベートメソッドとして独立
  - また、フォントやタイトルの画像読み込み処理における条件分岐を整理

## v0.27.1 (2026-01-08)
- `assets/fonts/NotoSansJP-Regular.ttf` の追加
  - 実行ファイル作成時に必要です
- 上記フォントファイル追加に伴い、`src/app.py` のフォント設定コードを変更

## v0.27.0 (2026-01-08)
- `data/novel_scripts.json` に最低限のストーリー追加
  - `assets/img/npc4.png` に仮画像を追加
  - `dialogues/dialogues.json` 最低限のクイズを定義
- **`WASD` で移動するように変更**
  - 選択は矢印キーのまま
- `src/core/talk.py` に以下の機能を実装・整理
  - 会話状態とクイズ状態の分離管理
  - クイズ中の入力処理ロジック追加
  - クイズ報酬の一度きり取得処理
  - 会話・クイズ終了後の待機フレーム導入
- NPC に `novel_trigger` を設定することで、会話後にノベルパートへ遷移可能に変更

## v0.26.0 (2026-01-06)
- `talk.py` に `_check_novel_trigger()` を追加
  - NPC に話しかけると novel パートに切り替わり、対応した novel が開始するような機能をもつ
- `app.py` の `start_game` でゲーム開始時 ending が始まるのを opening に変更
- `novel_scripts.json` の ending パートを追記（まだ完成はしていない）
- `dialogues.json` の NPC データに、novel_trigger を追加した NPC3 を追加
  - novel_trigger に novel_scripts の章名（opening など）を記載することで対応した novel が開始する
- 画像ファイル `control_room.png`, `np3.png`, `tanegashima_rocket.jpg` の追加

## v0.25.0 (2026-01-06)
- 操作説明の表示

## v0.24.4 (2026-01-06-issa)
> Happy NewYear!
時間がないのでVibe Cordingでいきます
- Create Kyutech Campus
  - 座標(214,104)にKyutech Campus への移動ポイントを作成
  - 遷移先は仮画像として`title.jpg`を指定しています
- フラグの設定
  > ゲームの進行状態を示すためにフラグを設定します
  - ui.pyで画面上部に次の目的地を示す
  - system.pyに次の目標をハードコードで書いておきます

## v0.24.3 (2025-12-23-issa)
- 出典の補強
- mp3の追加
  - Youtube Audio Libraryからの引用は安全

## v0.24.2 (2025-12-23)
- 会話終了時の自動クローズ機能の追加
  - 最終行でZキーを押下した際、およびクイズ回答直後に `_close_dialog` を呼び出す
  - これにより、ウィンドウが自動的に閉じるように修正
- 会話ループ（再発火）の防止
  - `_close_dialog` 実行時に `wait_frames`（クールタイム）を設定
  - `try_talk` での重複検知を抑制することで、会話が無限に繰り返される問題を解消
- 動的なウィンドウ配置
  - 画面サイズに基づき、画面下半分の中央にウィンドウを配置する計算ロジックを追加
- 報酬処理の整理
  - 通常会話終了時の報酬付与（`_process_npc_reward`）とクイズ正解時の報酬付与を分離
  - データ構造に即した確実な報酬付与と重複削除を実現
- is_active の判定ロジック
  - `self.active` の有無のみで判定するよう簡略化し、状態管理の整合性を高める

## v0.24.1 (2025-12-23-issa)
- **画像の追加**
  > NASAの画像を使います。以下の項目さえ守っていれば、使用はだいぶ緩そうです。JAXAの画像はやめましょう。利用するのに毎回申請が必要であるし、規制が厳しいです。
    1. NASAの丸いロゴは載せないこと
    2. NASAとの共同開発のような印象を与えない事
    3. 出典としてNASAを明記すること
- **data/storytext.mdの追加**
  - ストーリー展開を書いたものです。Copilotにソースコードを出力させるときなどに使って下さい。

- **Endingシーンの作り始め**
  - app.pyのstartgame関数の`self.vn.start("ending")`の`ending`部分を変えてください
  - 現在はオープニングをコメントアウトしています
  - Ending用のnovel_scripts.jsonを追加
 

## v0.24.0 (2025-12-23)
- **【重要】マップ画像サイズの制約**
  - **新たにマップ画像を追加する際、画像の縦横ピクセルサイズは必ず10の倍数にする必要があります**
  - **タイルサイズ (`TILE = 10`) との整合性を保ち、端数による累積的な座標ずれを根本的に防止するため**
  - 詳しくは Issues #56 で
- サンプリング範囲の拡張
  - 従来の1ピクセル（タイル中心）のみの判定から、中心部3×3ピクセルの近傍サンプリング方式に変更
  - これにより、画像のわずかなノイズや境界線の影響による誤判定を抑制し、移動の安定性を向上
- 色判定アルゴリズムの更新
  - 海の基本色 `(0, 95, 255)` に加え、波や波打ち際の表現 `(0, 143, 239)` を許容するよう判定範囲を最適化
  - 青成分の閾値を厳密に定義することで、他の青系統のタイルとの誤認を防止
- 垂直オフセット（`Y_OFFSET`）の導入
  - マップ全体が下方向にずれている現象に対応するため、判定座標を一律に補正するパラメータを追加
- 累積誤差補正（`Y_DRIFT`）の導入
  - 累積誤差を解消するため、`Y` 座標に比例した動的な補正計算式を追加

## v0.23.0 (2025-12-20-issa)
- `visual_novel.py`の新規作成
  - `VisualNovel`クラスの実装、以下の管理
    1. 背景
    2. 立ち絵
    3. テキストウィンドウ
  - VNはVisual Novelの略
  - シーン定数の定義<br>
    > 他の画面を実装したくなったらstate定数をここで与える

    SCENE_TITLE=0:タイトル画面<br>
  SCENE_GAME=1:RPG画面...etc.

- `app.py`の変更
  - 関数コメントの追加
- `novel_script.json`の新規作成
  > `bg`と`char`は指定していなければ、前の状態が維持されます。立ち絵を消したい場合は、"char":"none"を指定する
  - text:会話の内容を書く
  - bg:背景ファイル名
  - char:立ち絵画像ファイル名

## v0.22.0 (2025-12-20)
- `maps.json` での衝突判定を廃止
  - これに伴い `make_collision.py` を削除
- 定数 `TILE` を 16 から 10 へ変更
- 表示倍率を制御する定数 `ZOOM` および `Z_TILE` を導入
- 描画中心座標 `SCREEN_CENTER_X` および `SCREEN_CENTER_Y` を App クラスの解像度（900x700）に合わせて更新
- 海判定（移動不可判定）ロジックを移動先タイルの中心1ピクセルのみを参照する方式へ簡略化
- `load_map` メソッドに、描画負荷軽減のための事前拡大イメージ `map_image_zoom` の生成処理を追加
- `load_player` メソッドに、プレイヤー画像の事前拡大処理を追加し、画像不在時の代替サーフェスサイズを `Z_TILE` に同期
- draw メソッド内の描画計算式を、タイル座標に `Z_TILE` を乗算し ZOOM 加味のオフセットを加算する形式へ刷新
- プレイヤーの描画位置を画面中央に固定し、マップ側がスクロールする描画仕様へ変更
- NPCの描画および移動オフセット、ラベル表示位置を拡大率に合わせて再計算するよう修正
- 画面遷移（トランジション）の円の描画位置と速度を拡大後の画面サイズに合わせて調整

## v0.21.2 (2025-12-20)
- 従来の「タイル中心ピクセル基準」を廃止
- プレイヤーの足元位置を基準点として海／陸判定を行う方式に変更
- 単純な 3×3（9点）の同一重み多数決を廃止
- 重み付き投票方式を導入
  - 足元直下を最優先
  - 左右および直上を中優先
  - 斜め方向を補助的扱い

## v0.21.1 (2025-12-20)
- 海判定ロジックを 単一ピクセル判定 から 多数決方式 に変更した。
  - 各タイルについて、**中央を含む 3×3 ピクセル（計 9 ピクセル）**を対象にする。
  - 9 ピクセルのうち 半数以上（5 以上）が海色の場合のみ、そのタイルを海と判定する。

## v0.21.0 (2025-12-20-issa)
- visual_novel.pyの新規作成
- app.pyの変更
- novel_script.jsonの新規作成
  > 会話の内容を書く

## v0.20.0 (2025-12-20)
- NPC ごとに表示画像を指定できる仕組みを追加
- `assets/dialogues/dialogues.json` に `image` フィールドを追加することで、NPC 画像ファイル名を指定可能
- NPC 画像を `assets/img/` から読み込み、描画する処理を追加しました
- NPC の描画方法を、矩形描画から画像描画に変更
- NPC を示すための固定色矩形描画処理を削除

## v0.19.1 (2025-12-16)
- `assets/` 内の素材の変更

| 使用箇所 | 出典 |
| :---: | :---: |
| プレイヤー | <https://pipoya.net/sozai/terms-of-use/> |
| タイトル | <https://aipict.com/terms-of-use/> |
| 福岡県マップ | <https://rpgmap.hatenablog.com/> |
| マップ BGM | <https://dova-s.jp/> |
| 効果音 | <https://soundeffect-lab.info/> |

## v0.19.0 (2025-12-09-issa)
- 所持アイテムの欄と、座標の表示を重ならないようにしました
- NPCと話しただけでitemがもらえる機能追加
  - npc2でpart1を入手
- rewardを`[item1],[item2]`のようにリスト形式に
- itemの重複取得禁止
  > NPCからitemを取得したら、json上のデータをdeleteすることで、二回以上話しかけてもアイテムの重複取得が行われないようにする

## v0.18.1 (2025-12-08)
- `src/utils.py` に `resource_path` 関数を追加し、PyInstaller 実行時にファイルが見つからない問題に対応
- `app.py` および `field.py` 内で `BASE_DIR` を `resource_path("assets")` を利用する形に変更
- BGM 再生処理を `resource_path` を経由してファイルパスを取得するよう修正
  - 画像や JSON など外部リソース読み込み箇所も同様
- `docs/` に免責事項を追加

## v0.18.0 (2025-11-25)
- NPC_1のみが左右に動くように
- 移動させるかどうか,速度(speed),距離(max_offset),はdialogues.jsonでNPCごとにパラメータ管理
- 移動方向はfield.pyのscreen_x,screen_yの部分で管理
- 現在は左右移動のみ、今後はNPCごとに異なる動きを実装予定

## v0.17.1 (2025-11-24)
- バージョン表記方法の変更
- `src/` 下のファイルにおいて、相対 import を絶対 import に変更
- `src/__init__.py` を追加
  - **空ファイルだが、実行時に必要なので削除しないこと**
  - 実行ファイル化のために必要です

## v0.17.0 (2025-11-22)
- マップごとの BGM 管理機能の追加
- `assets/data/maps.json` の各ワールドのキーに `bgm` を追加し、BGM ファイルを指定する。
  - BGM ファイルは `assets/sounds/` にあるという前提

## v0.16.1 (2025-11-22)
- NPC に話しかけられないバグの修正
  - NPC の四近傍にいて、かつ、`Z` キーを押したときにのみ会話を開始するようにした

## v0.16.0 (2025-11-22-issa)
- `assets/data` のフォルダ作成
- 画面左上に現在の座標を表示
- `field.py` を大幅に書き換え、json をもとに map 遷移するアルゴリズムへ

## v0.15.0 (2025-11-22)
- BGM 追加
- BGM ファイルは `assets/sounds/` に入れる

## v0.14.0 (2025-11-21)
- **フォルダ構造の変更**
  <details>
  <summary>フォルダ構造を表示する</summary>

  ```
  PBL-Game
  ├── assets
  │   ├── dialogues
  │   │   └── dialogues.json
  │   ├── img
  │   │   ├── player_back.png
  │   │   ├── player_front.png
  │   │   ├── player_right.png
  │   │   ├── title.jpg
  │   │   ├── transition.jpg
  │   │   └── world_map.png
  │   └── sounds
  │       ├── chestclose.mp3
  │       └── chestopen.mp3
  ├── src
  │   ├── core
  │   │   ├── field.py
  │   │   ├── system.py
  │   │   └── talk.py
  │   ├── app.py
  │   ├── main.py
  │   ├── ui.py
  │   └── utils.py
  ├── .gitignore
  ├── CHANGELOG.md
  ├── LICENSE
  └── README.md
  ```

  </details>

- タイトル画像のファイル名を変更 ; `960.jpg` -> `title.jpg`
- `assets/` フォルダを追加し、ここに `img/`, `sounds/`, `dialogues/dialogues.json`を移動
- `src/` にソースコードを移動
- NPC 描画サイズを調整できるように修正
- `dialogues/dialogues.json` の NPC 座標を 2 要素形式に変更
- `field.py`, `talk.py` 内の NPC 表示・会話処理の修正
- 実行方法変更 ; `python -m src.main` で実行

## v0.13.0 (2025-11-18)
- プレイキャラクターの画像を移動方向に合わせて表示
- `player_front.png`, `player_back.png`, `player_right.png`のプレイキャラクターの前後左右画像を追加
- `player1.png` キャラクター仮画像の削除

## v0.12.0 (2025-11-18)
- プレイキャラクターの画像表示
- `player1.png` プレイヤー画像(仮)の追加(移動時の方向に合わせて、前後左右のキャラ画像に変更予定)
- キャラの解像度に合わせてタイルサイズを16に一旦変更

## v0.11.0 (2025-11-18)
- 効果音追加
- 音源は `sounds/` で管理

## v0.10.0 (2025-11-18)
- ワールド遷移時のアイリスアウト、アイリスインのアニメーション追加

## v0.9.1 (2025-11-18-issa)
- field.pyの変更
  - 画面のサイズをでかく(キャラクターの解像度が決まり次第タイルサイズを変更予定)
  - キー押下で連続移動できるように変更
  - `self.speed` は移動速度を変更できる  
    `offset` は1タイル分のピクセル数、`TILE=60` と定義されているなら1マス60px、`offset+=self.speed` としているのでspeedを変化させると移動速度が上がる

## v0.9.0 (2025-11-18)
- ワールド遷移の実装

## v0.8.2 (2025-11-18)
- 画面外に出られないように

## v0.8.1 (2025-11-18)
- 移動時のカクツキを解消

## v0.8.0 (2025-11-11)
- 全体マップ（世界地図）アセットの追加
- `img/` フォルダに `world_map.png` を追加
- プレイヤーを中心に世界地図がスクロールするように

## v0.7.0 (2025-11-04)
- 起動画面の追加
- `img/` フォルダの追加(画像ファイルはここに追加し、参照するように)

## v0.6.0 (2025-11-04)
- **ゲームエンジンを `Pygame` に変更**

## v0.5.2 (2025-11-04)
- 起動不能バグの修正
- `README.md` の加筆修正、日本語化

## v0.5.1 (2025-11-04)
- `assets.pyxres` の追加
- `k8x12S.bdf` の追加

## v0.5.0 (2025-11-03)
- `CHANGELOG.md` の日本語化
- コードの説明を追加
- 将来的なテクスチャ、BGM 追加に対応

### 対応予定
| 種類 | 対応箇所 | 備考 |
| :---: | :---: | :---: |
| プレイヤー表示 | `core/field.py` 内 `# プレイヤー描画` | `px.blt(56, 56, 0, 0, 0, 16, 16, 0)` |
| NPC 表示 | `core/field.py` 内 `# NPC描画` | `px.blt(screen_x, screen_y, 0, 16, 0, 16, 16, 0)` |
| タイルマップ | `core/field.py` 内 `# 将来的なアセット対応` | `px.bltm()` 利用 |
| BGM | `core/system.py` | `px.playm(track_id, loop=True)` |
| SE | `core/field.py`，`core/talk.py` | `px.play()` を適宜挿入 |

**BGM**
| 機能 | 実装箇所 | 備考 |
| :---: | :---: | :---: |
| BGM再生 | `System.play_bgm()` | `px.playm(track_id, loop=True)` を有効化 |
| BGM停止 | `System.stop_bgm()` | `px.stop()` を有効化 |
| 歩行音 | `Field.start_move()` | `px.play()` を追加 |
| 会話開始BGM切替 | `Talk.open_dialog()` | `self.app.system.play_bgm(track_id)` |
| クイズ正解／不正解SE | `Talk.update()` | `px.play(3, 2)` / `px.play(3, 3)` |

## v0.4.0 (2025-11-02)
- `/src` 以下を大幅に変更し、新たなテンプレートに置き換え

## v0.3.0 (2025-10-28)
- `src/main.py` に <https://github.com/shiromofufactory/pyxel-tiny-drpg> から引用
- `src/sample.py` を削除

## v0.2.1 (2025-10-28)
- リファクタリング

## v0.2.0 (2025-10-28)
- `pyxel` のサンプルを追加

## v0.1.0 (2025-10-28)
- リポジトリ作成
- プロジェクト開始
